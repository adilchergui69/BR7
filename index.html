<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="fontawesome-free-5.15.4-web/fontawesome-free-5.15.4-web/css/all.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
</head>
<body>
   
    <table  class="list" id="table">
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Date</th>
                <th>Price</th>
                <th>Language</th>
                <th>Type</th>
                <th>Edit/Delete</th>
            </tr>
    </table>

    <div class="container">
        <div class="header">
            <h2 style="text-align: center;" >Book Information</h2>
        </div>
        <form id="form" class="form">
            <div class="form-control">
                <label for="adil">Title:</label>
                <input autocomplete="off" type="text" placeholder="book title" id="titlet" />
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label>Author:</label>
                <input autocomplete="off" type="text" placeholder="author" id="author" />
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
           
                
                <label for="start">Publication Date:</label>

                <input type="date" id="date" name="trip-start">
           
                <small>Error message</small>

            </div>
            <div class="form-control">
                <label for="adil">Price:</label>
                <input autocomplete="off" type="number" step=".000001"  min="0" placeholder="book price" id="price"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
           

              <div class="form-control">
                <label for="adil">Language:</label>
                <select id="lang" autocomplete="off" name="selection" >
                    <option disabled hidden selected value> -- select an option -- </option>
                    <option value="arabic">Arabic</option>
                    <option value="France">France</option>
                    <option value="English">English</option>
                    <option value="Swedish">Swedish</option>
               
                    
                </select>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>

            </div>
            <div id="radio_container" class="form-control">
                <label  style="display: block;" for="adil"> Book Type:</label>
                <label id="type" class="container-radio">One
                    <input type="radio" value="One" name="season" class="type">
                    <span class="checkmark"></span>
                  </label>
                  <label id="type" class="container-radio" >Two
                    <input type="radio" value="Two" name="season" class="type">
                    <span class="checkmark"></span>
                  </label>
                  <label id="type" class="container-radio">Three
                    <input type="radio" value="Three" name="season" class="type">
                    <span class="checkmark"></span>
                  </label>
                <p id="radiobtn" ></p>
             
            </div>
            
            <button>Submit</button>
        </form>
    </div>
    
    <script>
const form = document.getElementById('form');
const titlet = document.getElementById('titlet');
const author = document.getElementById('author');
const date = document.getElementById('date');
const lang = document.getElementById('lang');
var table = document.getElementById("table");
var type=document.getElementsByClassName("type");
var max_length = 30;


form.addEventListener('submit', e => {
	e.preventDefault();
	checkInputs();
});

function checkInputs() {
	// trim to remove the whitespaces
	const titletValue = titlet.value.trim();
	const authorValue = author.value.trim();
	const priceValue = price.value.trim();
	const dateValue = date.value.trim();
    const langValue = lang.value.trim();

    var letters = /^[a-z\s]*$/i;
    var error_situation = false;

	if(titletValue === '') {
		setErrorFor(titlet, '*title cannot be blank');
        error_situation++
    }
    if (!titletValue.match(letters)) {
        setErrorFor(titlet, '*letters only');
        error_situation++
	} else {
		setSuccessFor(titlet);
	}
    if (titlet.value.length>max_length) {
        setErrorFor(titlet, '*title must be lest 30');
        error_situation++
    }
 
    if(priceValue === '') {
		setErrorFor(price, '*author cannot be blank');
        error_situation++
      
	} else {
		setSuccessFor(price);
	}
    
	
	if(authorValue === '') {
		setErrorFor(author, '*author cannot be blank');
        error_situation++
        
	} else {
		setSuccessFor(author);
	}

    if (author.value.length>max_length) {
        setErrorFor(author, '*title must be lest 30');
    }
	
	if(priceValue === '') {
		setErrorFor(price, '*price cannot be blank');
        error_situation++
	} else {
		setSuccessFor(price);
       
	}
	
    if(dateValue === '') {
        setErrorFor(date, '*date cannot be blank');
        error_situation++
	} else {
        setSuccessFor(date);
	}
    
    if(lang.value == ""){
        error_situation++
        lang.parentElement.className = 'form-control error'
        setErrorFor(lang, '*Language cannot be blank');
    } else {
        setSuccessFor(lang);
	}
   
    
    var getSelectedValue = document.querySelector('input[name="season"]:checked');

            if(getSelectedValue != null) {
               
                document.getElementById("radiobtn").innerHTML =  " season is selected";
                radiobtn.style.color = '#2ecc71'
            }
            else {
          document.getElementById("radiobtn").innerHTML = "*You have not selected any season";
          radiobtn.style.color = '#e74c3c'
            }
//////////////////////////////////////////////////////////////////////////////

        if(!error_situation){
            var row = table.insertRow(-1);
            row.insertCell(0).innerHTML = titletValue;
            row.insertCell(1).innerHTML = authorValue;
            row.insertCell(2).innerHTML = dateValue;
            row.insertCell(3).innerHTML = priceValue + "$";
            row.insertCell(4).innerHTML = lang.options[lang.selectedIndex].value;
            row.insertCell(5).innerHTML = `<button onClick='onEdit(this)'>Edit</button> <button onClick='onDelete(this)'>Delete</button>`
            
            var CellType="";

                for(i=0;i<type.length;i++)
                {
                    if(type[i].checked)
                    {
                        CellType=type[i].value;
                    } 
                }
                row.insertCell(5).innerHTML = CellType;
        }
       
    }

function setErrorFor(input, message) {
	const formControl = input.parentElement;
	const small = formControl.querySelector('small');
	formControl.className = 'form-control error';
	small.innerText = message;
    error_situation = false;
}

function setSuccessFor(input) {
	const formControl = input.parentElement;
	formControl.className = 'form-control success';
    error_situation = true;
}

function setErrorFor(select, message) {
	const formControl = select.parentElement;
	const small = formControl.querySelector('small');
	formControl.className = 'form-control error';
	small.innerText = message;
}

function setSuccessFor(select) {
	const formControl = select.parentElement;
	formControl.className = 'form-control success';
}



//Edit the data
function onEdit(td){
    selectedRow = td.parentElement.parentElement;
    document.getElementById('titletValue') = selectedRow.cells[0].innerHTML;
    document.getElementById('authorValue').value = selectedRow.cells[1].innerHTML;
    document.getElementById('priceValue').value = selectedRow.cells[2].innerHTML;
    document.getElementById('dateValue').value = selectedRow.cells[3].innerHTML;
    document.getElementById('langValue').value = selectedRow.cells[4].innerHTML;

}

function updateRecord(formData){
    selectedRow.cells[0].innerHTML = formData.productCode;
    selectedRow.cells[1].innerHTML = formData.product;
    selectedRow.cells[2].innerHTML = formData.qty;
    selectedRow.cells[3].innerHTML = formData.perPrice;
}

//Delete the data
function onDelete(td){
    if(confirm('Do you want to delete this row?')){
        row = td.parentElement.parentElement;
        document.getElementById('table').deleteRow(row.rowIndex);
    }

    resetForm();
}



    </script>
</body>
</html>